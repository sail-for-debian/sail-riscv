(*Generated by Lem from generated_definitions/lem/RV32/riscv_types.lem.*)
open HolKernel Parse boolLib bossLib;
open lem_pervasives_extraTheory sail2_instr_kindsTheory sail2_valuesTheory sail2_prompt_monadTheory sail2_operators_mwordsTheory sail2_promptTheory sail2_stringTheory;

val _ = numLib.prefer_num();



val _ = new_theory "riscv_types"

(*Generated by Sail from riscv.*)
(*open import Pervasives_extra*)
(*open import Sail2_instr_kinds*)
(*open import Sail2_values*)
(*open import Sail2_string*)
(*open import Sail2_operators_mwords*)
(*open import Sail2_prompt_monad*)
(*open import Sail2_prompt*)


val _ = type_abbrev((*  'n *) "bits" , ``:  'n words$word``);

val _ = Hol_datatype `
 regfp  =
    RFull of (string)
  | RSlice of ((string # ii # ii))
  | RSliceBit of ((string # ii))
  | RField of ((string # string))`;




val _ = type_abbrev( "regfps"  , ``: regfp list``);

val _ = Hol_datatype `
 niafp  =
    NIAFP_successor of (unit)
  | NIAFP_concrete_address of ( 64 bits)
  | NIAFP_indirect_address of (unit)`;




val _ = type_abbrev( "niafps"  , ``: niafp list``);

val _ = Hol_datatype `
 diafp  =   DIAFP_none of (unit) | DIAFP_concrete of ( 64 bits) | DIAFP_reg of (regfp)`;
























val _ = type_abbrev( "xlenbits"  , ``: 32 bits``);





val _ = type_abbrev( "flenbits"  , ``: 32 bits``);

val _ = type_abbrev( "mem_meta"  , ``: unit``);



val _ = type_abbrev( "exc_code"  , ``: 8 bits``);

val _ = type_abbrev( "ext_ptw"  , ``: unit``);

val _ = type_abbrev( "ext_ptw_fail"  , ``: unit``);

val _ = type_abbrev( "ext_ptw_error"  , ``: unit``);

val _ = type_abbrev( "ext_exc_type"  , ``: unit``);

val _ = type_abbrev( "half"  , ``: 16 bits``);

val _ = type_abbrev( "word"  , ``: 32 bits``);

val _ = type_abbrev( "regidx"  , ``: 5 bits``);

val _ = type_abbrev( "cregidx"  , ``: 3 bits``);

val _ = type_abbrev( "csreg"  , ``: 12 bits``);

val _ = type_abbrev((*  'n *) "regno" , ``: int``);

val _ = type_abbrev( "opcode"  , ``: 7 bits``);

val _ = type_abbrev( "imm12"  , ``: 12 bits``);

val _ = type_abbrev( "imm20"  , ``: 20 bits``);

val _ = type_abbrev( "amo"  , ``: 1 bits``);

val _ = Hol_datatype `
 Architecture =   RV32 | RV64 | RV128`;




val _ = type_abbrev( "arch_xlen"  , ``: 2 bits``);

val _ = type_abbrev( "priv_level"  , ``: 2 bits``);

val _ = Hol_datatype `
 Privilege =   User | Supervisor | Machine`;




val _ = Hol_datatype `
 AccessType =   Read of ('a) | Write of ('a) | ReadWrite of (('a # 'a)) | Execute of (unit)`;




val _ = Hol_datatype `
 ExceptionType  =
    E_Fetch_Addr_Align of (unit)
  | E_Fetch_Access_Fault of (unit)
  | E_Illegal_Instr of (unit)
  | E_Breakpoint of (unit)
  | E_Load_Addr_Align of (unit)
  | E_Load_Access_Fault of (unit)
  | E_SAMO_Addr_Align of (unit)
  | E_SAMO_Access_Fault of (unit)
  | E_U_EnvCall of (unit)
  | E_S_EnvCall of (unit)
  | E_Reserved_10 of (unit)
  | E_M_EnvCall of (unit)
  | E_Fetch_Page_Fault of (unit)
  | E_Load_Page_Fault of (unit)
  | E_Reserved_14 of (unit)
  | E_SAMO_Page_Fault of (unit)
  | E_Extension of (ext_exc_type)`;




val _ = Hol_datatype `
 amoop =   AMOSWAP | AMOADD | AMOXOR | AMOAND | AMOOR | AMOMIN | AMOMAX | AMOMINU | AMOMAXU`;




val _ = Hol_datatype `
 bop =   RISCV_BEQ | RISCV_BNE | RISCV_BLT | RISCV_BGE | RISCV_BLTU | RISCV_BGEU`;




val _ = Hol_datatype `
 csrop =   CSRRW | CSRRS | CSRRC`;




val _ = Hol_datatype `
 f_bin_op_S =   FSGNJ_S | FSGNJN_S | FSGNJX_S | FMIN_S | FMAX_S | FEQ_S | FLT_S | FLE_S`;




val _ = Hol_datatype `
 f_bin_rm_op_S =   FADD_S | FSUB_S | FMUL_S | FDIV_S`;




val _ = Hol_datatype `
 f_madd_op_S =   FMADD_S | FMSUB_S | FNMSUB_S | FNMADD_S`;




val _ = Hol_datatype `
 f_un_op_S =   FCLASS_S | FMV_X_W | FMV_W_X`;




val _ = Hol_datatype `
 f_un_rm_op_S =
    FSQRT_S
  | FCVT_W_S
  | FCVT_WU_S
  | FCVT_S_W
  | FCVT_S_WU
  | FCVT_L_S
  | FCVT_LU_S
  | FCVT_S_L
  | FCVT_S_LU`;




val _ = Hol_datatype `
 iop =   RISCV_ADDI | RISCV_SLTI | RISCV_SLTIU | RISCV_XORI | RISCV_ORI | RISCV_ANDI`;




val _ = Hol_datatype `
 rop =
    RISCV_ADD
  | RISCV_SUB
  | RISCV_SLL
  | RISCV_SLT
  | RISCV_SLTU
  | RISCV_XOR
  | RISCV_SRL
  | RISCV_SRA
  | RISCV_OR
  | RISCV_AND`;




val _ = Hol_datatype `
 ropw =   RISCV_ADDW | RISCV_SUBW | RISCV_SLLW | RISCV_SRLW | RISCV_SRAW`;




val _ = Hol_datatype `
 rounding_mode =   RM_RNE | RM_RTZ | RM_RDN | RM_RUP | RM_RMM | RM_DYN`;




val _ = Hol_datatype `
 sop =   RISCV_SLLI | RISCV_SRLI | RISCV_SRAI`;




val _ = Hol_datatype `
 sopw =   RISCV_SLLIW | RISCV_SRLIW | RISCV_SRAIW`;




val _ = Hol_datatype `
 uop =   RISCV_LUI | RISCV_AUIPC`;




val _ = Hol_datatype `
 word_width =   BYTE | HALF | WORD | DOUBLE`;




val _ = Hol_datatype `
 ast  =
    UTYPE of (( 20 bits # regidx # uop))
  | RISCV_JAL of (( 21 bits # regidx))
  | RISCV_JALR of (( 12 bits # regidx # regidx))
  | BTYPE of (( 13 bits # regidx # regidx # bop))
  | ITYPE of (( 12 bits # regidx # regidx # iop))
  | SHIFTIOP of (( 6 bits # regidx # regidx # sop))
  | RTYPE of ((regidx # regidx # regidx # rop))
  | LOAD of (( 12 bits # regidx # regidx # bool # word_width # bool # bool))
  | STORE of (( 12 bits # regidx # regidx # word_width # bool # bool))
  | ADDIW of (( 12 bits # regidx # regidx))
  | SHIFTW of (( 5 bits # regidx # regidx # sop))
  | RTYPEW of ((regidx # regidx # regidx # ropw))
  | SHIFTIWOP of (( 5 bits # regidx # regidx # sopw))
  | FENCE of (( 4 bits # 4 bits))
  | FENCE_TSO of (( 4 bits # 4 bits))
  | FENCEI of (unit)
  | ECALL of (unit)
  | MRET of (unit)
  | SRET of (unit)
  | EBREAK of (unit)
  | WFI of (unit)
  | SFENCE_VMA of ((regidx # regidx))
  | LOADRES of ((bool # bool # regidx # word_width # regidx))
  | STORECON of ((bool # bool # regidx # regidx # word_width # regidx))
  | AMO of ((amoop # bool # bool # regidx # regidx # word_width # regidx))
  | C_NOP of (unit)
  | C_ADDI4SPN of ((cregidx # 8 bits))
  | C_LW of (( 5 bits # cregidx # cregidx))
  | C_LD of (( 5 bits # cregidx # cregidx))
  | C_SW of (( 5 bits # cregidx # cregidx))
  | C_SD of (( 5 bits # cregidx # cregidx))
  | C_ADDI of (( 6 bits # regidx))
  | C_JAL of ( 11 bits)
  | C_ADDIW of (( 6 bits # regidx))
  | C_LI of (( 6 bits # regidx))
  | C_ADDI16SP of ( 6 bits)
  | C_LUI of (( 6 bits # regidx))
  | C_SRLI of (( 6 bits # cregidx))
  | C_SRAI of (( 6 bits # cregidx))
  | C_ANDI of (( 6 bits # cregidx))
  | C_SUB of ((cregidx # cregidx))
  | C_XOR of ((cregidx # cregidx))
  | C_OR of ((cregidx # cregidx))
  | C_AND of ((cregidx # cregidx))
  | C_SUBW of ((cregidx # cregidx))
  | C_ADDW of ((cregidx # cregidx))
  | C_J of ( 11 bits)
  | C_BEQZ of (( 8 bits # cregidx))
  | C_BNEZ of (( 8 bits # cregidx))
  | C_SLLI of (( 6 bits # regidx))
  | C_LWSP of (( 6 bits # regidx))
  | C_LDSP of (( 6 bits # regidx))
  | C_SWSP of (( 6 bits # regidx))
  | C_SDSP of (( 6 bits # regidx))
  | C_JR of (regidx)
  | C_JALR of (regidx)
  | C_MV of ((regidx # regidx))
  | C_EBREAK of (unit)
  | C_ADD of ((regidx # regidx))
  | MUL of ((regidx # regidx # regidx # bool # bool # bool))
  | DIV0 of ((regidx # regidx # regidx # bool))
  | REM of ((regidx # regidx # regidx # bool))
  | MULW of ((regidx # regidx # regidx))
  | DIVW of ((regidx # regidx # regidx # bool))
  | REMW of ((regidx # regidx # regidx # bool))
  | CSR of (( 12 bits # regidx # regidx # bool # csrop))
  | URET of (unit)
  | C_NOP_HINT of ( 6 bits)
  | C_ADDI_HINT of (regidx)
  | C_LI_HINT of ( 6 bits)
  | C_LUI_HINT of ( 6 bits)
  | C_MV_HINT of (regidx)
  | C_ADD_HINT of (regidx)
  | C_SLLI_HINT of (( 6 bits # regidx))
  | C_SRLI_HINT of (cregidx)
  | C_SRAI_HINT of (cregidx)
  | FENCE_RESERVED of (( 4 bits # 4 bits # 4 bits # regidx # regidx))
  | FENCEI_RESERVED of (( 12 bits # regidx # regidx))
  | LOAD_FP of (( 12 bits # regidx # regidx # word_width))
  | STORE_FP of (( 12 bits # regidx # regidx # word_width))
  | F_MADD_TYPE_S of ((regidx # regidx # regidx # rounding_mode # regidx # f_madd_op_S))
  | F_BIN_RM_TYPE_S of ((regidx # regidx # rounding_mode # regidx # f_bin_rm_op_S))
  | F_UN_RM_TYPE_S of ((regidx # rounding_mode # regidx # f_un_rm_op_S))
  | F_BIN_TYPE_S of ((regidx # regidx # regidx # f_bin_op_S))
  | F_UN_TYPE_S of ((regidx # regidx # f_un_op_S))
  | C_FLWSP of (( 6 bits # regidx))
  | C_FSWSP of (( 6 bits # regidx))
  | C_FLW of (( 5 bits # cregidx # cregidx))
  | C_FSW of (( 5 bits # cregidx # cregidx))
  | ILLEGAL of (word)
  | C_ILLEGAL of (half)`;




val _ = Hol_datatype `
 PTW_Error  =
    PTW_Invalid_Addr of (unit)
  | PTW_Access of (unit)
  | PTW_Invalid_PTE of (unit)
  | PTW_No_Permission of (unit)
  | PTW_Misaligned of (unit)
  | PTW_PTE_Update of (unit)
  | PTW_Ext_Error of (ext_ptw_error)`;




val _ = Hol_datatype `
 Retired =   RETIRE_SUCCESS | RETIRE_FAIL`;




val _ = Hol_datatype `
 InterruptType =
    I_U_Software
  | I_S_Software
  | I_M_Software
  | I_U_Timer
  | I_S_Timer
  | I_M_Timer
  | I_U_External
  | I_S_External
  | I_M_External`;




val _ = Hol_datatype `
 exception  =   Error_not_implemented of (string) | Error_internal_error of (unit)`;




val _ = type_abbrev( "tv_mode"  , ``: 2 bits``);

val _ = Hol_datatype `
 TrapVectorMode =   TV_Direct | TV_Vector | TV_Reserved`;




val _ = type_abbrev( "ext_status"  , ``: 2 bits``);

val _ = Hol_datatype `
 ExtStatus =   Off | Initial | Clean | Dirty`;




val _ = type_abbrev( "satp_mode"  , ``: 4 bits``);

val _ = Hol_datatype `
 SATPMode =   Sbare | Sv32 | Sv39 | Sv48`;




val _ = type_abbrev( "csrRW"  , ``: 2 bits``);

val _ = type_abbrev( "ext_access_type"  , ``: unit``);

val _ = type_abbrev( "regtype"  , ``: xlenbits``);

val _ = type_abbrev( "fregtype"  , ``: flenbits``);

val _ = Hol_datatype `
 f_madd_op_D =   FMADD_D | FMSUB_D | FNMSUB_D | FNMADD_D`;




val _ = Hol_datatype `
 f_bin_rm_op_D =   FADD_D | FSUB_D | FMUL_D | FDIV_D`;




val _ = Hol_datatype `
 f_un_rm_op_D =
    FSQRT_D
  | FCVT_W_D
  | FCVT_WU_D
  | FCVT_D_W
  | FCVT_D_WU
  | FCVT_S_D
  | FCVT_D_S
  | FCVT_L_D
  | FCVT_LU_D
  | FCVT_D_L
  | FCVT_D_LU`;




val _ = Hol_datatype `
 f_bin_op_D =   FSGNJ_D | FSGNJN_D | FSGNJX_D | FMIN_D | FMAX_D | FEQ_D | FLT_D | FLE_D`;




val _ = Hol_datatype `
 f_un_op_D =   FCLASS_D | FMV_X_D | FMV_D_X`;




val _ = Hol_datatype `
 Misa  = <| Misa_Misa_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Counteren  = <| Counteren_Counteren_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Counterin  = <| Counterin_Counterin_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Fcsr  = <| Fcsr_Fcsr_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Mcause  = <| Mcause_Mcause_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Medeleg  = <| Medeleg_Medeleg_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Minterrupts  = <| Minterrupts_Minterrupts_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Mstatus  = <| Mstatus_Mstatus_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Mstatush  = <| Mstatush_Mstatush_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Mtvec  = <| Mtvec_Mtvec_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 PTE_Bits  = <| PTE_Bits_PTE_Bits_chunk_0 :  8 words$word  |>`;



val _ = Hol_datatype `
 Pmpcfg_ent  = <| Pmpcfg_ent_Pmpcfg_ent_chunk_0 :  8 words$word  |>`;



val _ = Hol_datatype `
 SV32_PTE  = <| SV32_PTE_SV32_PTE_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 SV32_Paddr  = <| SV32_Paddr_SV32_Paddr_chunk_0 :  34 words$word  |>`;



val _ = Hol_datatype `
 SV32_Vaddr  = <| SV32_Vaddr_SV32_Vaddr_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 SV39_PTE  = <| SV39_PTE_SV39_PTE_chunk_0 :  64 words$word  |>`;



val _ = Hol_datatype `
 SV39_Paddr  = <| SV39_Paddr_SV39_Paddr_chunk_0 :  56 words$word  |>`;



val _ = Hol_datatype `
 SV39_Vaddr  = <| SV39_Vaddr_SV39_Vaddr_chunk_0 :  39 words$word  |>`;



val _ = Hol_datatype `
 SV48_PTE  = <| SV48_PTE_SV48_PTE_chunk_0 :  64 words$word  |>`;



val _ = Hol_datatype `
 SV48_Paddr  = <| SV48_Paddr_SV48_Paddr_chunk_0 :  56 words$word  |>`;



val _ = Hol_datatype `
 SV48_Vaddr  = <| SV48_Vaddr_SV48_Vaddr_chunk_0 :  48 words$word  |>`;



val _ = Hol_datatype `
 Satp32  = <| Satp32_Satp32_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Satp64  = <| Satp64_Satp64_chunk_0 :  64 words$word  |>`;



val _ = Hol_datatype `
 Sedeleg  = <| Sedeleg_Sedeleg_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Sinterrupts  = <| Sinterrupts_Sinterrupts_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Sstatus  = <| Sstatus_Sstatus_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Uinterrupts  = <| Uinterrupts_Uinterrupts_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 Ustatus  = <| Ustatus_Ustatus_chunk_0 :  32 words$word  |>`;



val _ = Hol_datatype `
 htif_cmd  = <| htif_cmd_htif_cmd_chunk_0 :  64 words$word  |>`;



val _ = Hol_datatype `
 PmpAddrMatchType =   OFF | TOR | NA4 | NAPOT`;




val _ = type_abbrev( "pmp_addr_range"  , ``:  ((xlenbits # xlenbits))option``);

val _ = Hol_datatype `
 pmpAddrMatch =   PMP_NoMatch | PMP_PartialMatch | PMP_Match`;




val _ = Hol_datatype `
 pmpMatch =   PMP_Success | PMP_Continue | PMP_Fail`;




val _ = Hol_datatype `
 Ext_FetchAddr_Check =   Ext_FetchAddr_OK of (xlenbits) | Ext_FetchAddr_Error of ('a)`;




val _ = Hol_datatype `
 Ext_ControlAddr_Check =   Ext_ControlAddr_OK of (xlenbits) | Ext_ControlAddr_Error of ('a)`;




val _ = Hol_datatype `
 Ext_DataAddr_Check =   Ext_DataAddr_OK of (xlenbits) | Ext_DataAddr_Error of ('a)`;




val _ = Hol_datatype `
 Ext_PhysAddr_Check  =   Ext_PhysAddr_OK of (unit) | Ext_PhysAddr_Error of (ExceptionType)`;




val _ = type_abbrev( "ext_fetch_addr_error"  , ``: unit``);

val _ = type_abbrev( "ext_control_addr_error"  , ``: unit``);

val _ = type_abbrev( "ext_data_addr_error"  , ``: unit``);

val _ = type_abbrev( "ext_exception"  , ``: unit``);

val _ = Hol_datatype `
 sync_exception  =
  <| sync_exception_trap : ExceptionType;
     sync_exception_excinfo :  xlenbits option;
     sync_exception_ext :  ext_exception option  |>`;



val _ = type_abbrev( "bits_rm"  , ``: 3 bits``);

val _ = type_abbrev( "bits_fflags"  , ``: 5 bits``);

val _ = type_abbrev( "bits_S"  , ``: 32 bits``);

val _ = type_abbrev( "bits_D"  , ``: 64 bits``);

val _ = type_abbrev( "bits_W"  , ``: 32 bits``);

val _ = type_abbrev( "bits_WU"  , ``: 32 bits``);

val _ = type_abbrev( "bits_L"  , ``: 64 bits``);

val _ = type_abbrev( "bits_LU"  , ``: 64 bits``);

val _ = Hol_datatype `
 interrupt_set  =
    Ints_Pending of (xlenbits) | Ints_Delegated of (xlenbits) | Ints_Empty of (unit)`;




val _ = Hol_datatype `
 ctl_result  =
    CTL_TRAP of (sync_exception) | CTL_SRET of (unit) | CTL_MRET of (unit) | CTL_URET of (unit)`;




val _ = Hol_datatype `
 MemoryOpResult =   MemValue of ('a) | MemException of (ExceptionType)`;




val _ = type_abbrev( "pteAttribs"  , ``: 8 bits``);

val _ = type_abbrev( "extPte"  , ``: 10 bits``);

val _ = Hol_datatype `
 PTE_Check  =   PTE_Check_Success of (ext_ptw) | PTE_Check_Failure of ((ext_ptw # ext_ptw_fail))`;




val _ = type_abbrev( "vaddr32"  , ``: 32 bits``);

val _ = type_abbrev( "paddr32"  , ``: 34 bits``);

val _ = type_abbrev( "pte32"  , ``: 32 bits``);

val _ = type_abbrev( "asid32"  , ``: 9 bits``);

val _ = type_abbrev( "paddr64"  , ``: 56 bits``);

val _ = type_abbrev( "pte64"  , ``: 64 bits``);

val _ = type_abbrev( "asid64"  , ``: 16 bits``);

val _ = type_abbrev( "vaddr39"  , ``: 39 bits``);

val _ = type_abbrev( "vaddr48"  , ``: 48 bits``);

val _ = type_abbrev( "pte48"  , ``: 64 bits``);

val _ = Hol_datatype `
 PTW_Result =
    PTW_Success of (('paddr # 'pte # 'paddr # ii # bool # ext_ptw))
  | PTW_Failure of ((PTW_Error # ext_ptw))`;




val _ = Hol_datatype `
 TR_Result =
    TR_Address of (('a_paddr # ext_ptw)) | TR_Failure of (('b_failure # ext_ptw))`;




val _ = Hol_datatype `
(* ( 'a_asidlen, 'b_valen, 'c_palen, 'd_ptelen) *) TLB_Entry =
  <| TLB_Entry_asid :'a_asidlen bits;
     TLB_Entry_global : bool;
     TLB_Entry_vAddr :'b_valen bits;
     TLB_Entry_pAddr :'c_palen bits;
     TLB_Entry_vMatchMask :'b_valen bits;
     TLB_Entry_vAddrMask :'b_valen bits;
     TLB_Entry_pte :'d_ptelen bits;
     TLB_Entry_pteAddr :'c_palen bits;
     TLB_Entry_age : 64 bits  |>`;



val _ = type_abbrev( "TLB32_Entry"  , ``: (9, 32, 34, 32) TLB_Entry``);

val _ = Hol_datatype `
 FetchResult  =
    F_Ext_Error of (ext_fetch_addr_error)
  | F_Base of (word)
  | F_RVC of (half)
  | F_Error of ((ExceptionType # xlenbits))`;




val _ = Hol_datatype `
 register_value  =
    Regval_vector of ( register_value list)
  | Regval_list of ( register_value list)
  | Regval_option of ( register_value option)
  | Regval_Counteren of (Counteren)
  | Regval_Counterin of (Counterin)
  | Regval_Fcsr of (Fcsr)
  | Regval_Mcause of (Mcause)
  | Regval_Medeleg of (Medeleg)
  | Regval_Minterrupts of (Minterrupts)
  | Regval_Misa of (Misa)
  | Regval_Mstatus of (Mstatus)
  | Regval_Mstatush of (Mstatush)
  | Regval_Mtvec of (Mtvec)
  | Regval_Pmpcfg_ent of (Pmpcfg_ent)
  | Regval_Privilege of (Privilege)
  | Regval_Sedeleg of (Sedeleg)
  | Regval_Sinterrupts of (Sinterrupts)
  | Regval_TLB_Entry_9_32_34_32 of ( (9, 32, 34, 32)TLB_Entry)
  | Regval_bit of (bitU)
  | Regval_bitvector_32_dec of ( 32 words$word)
  | Regval_bitvector_4_dec of ( 4 words$word)
  | Regval_bitvector_64_dec of ( 64 words$word)
  | Regval_bool of (bool)`;




val _ = Hol_datatype `
 regstate  =
  <| Counteren_reg : string -> Counteren;
     Counterin_reg : string -> Counterin;
     Fcsr_reg : string -> Fcsr;
     Mcause_reg : string -> Mcause;
     Medeleg_reg : string -> Medeleg;
     Minterrupts_reg : string -> Minterrupts;
     Misa_reg : string -> Misa;
     Mstatus_reg : string -> Mstatus;
     Mstatush_reg : string -> Mstatush;
     Mtvec_reg : string -> Mtvec;
     Pmpcfg_ent_reg : string -> Pmpcfg_ent;
     Privilege_reg : string -> Privilege;
     Sedeleg_reg : string -> Sedeleg;
     Sinterrupts_reg : string -> Sinterrupts;
     bit_reg : string -> bitU;
     bitvector_32_dec_reg : string ->  32 words$word;
     bitvector_4_dec_reg : string ->  4 words$word;
     bitvector_64_dec_reg : string ->  64 words$word;
     bool_reg : string -> bool;
     option_TLB_Entry_9_32_34_32_reg : string ->  ( (9, 32, 34, 32)TLB_Entry)option  |>`;





(*val Counteren_of_regval : register_value -> maybe Counteren*)

val _ = Define `
 ((Counteren_of_regval:register_value ->(Counteren)option) merge_var=
    ((case merge_var of   Regval_Counteren (v) => SOME v | _ => NONE )))`;


(*val regval_of_Counteren : Counteren -> register_value*)

val _ = Define `
 ((regval_of_Counteren:Counteren -> register_value) v=  (Regval_Counteren v))`;


(*val Counterin_of_regval : register_value -> maybe Counterin*)

val _ = Define `
 ((Counterin_of_regval:register_value ->(Counterin)option) merge_var=
    ((case merge_var of   Regval_Counterin (v) => SOME v | _ => NONE )))`;


(*val regval_of_Counterin : Counterin -> register_value*)

val _ = Define `
 ((regval_of_Counterin:Counterin -> register_value) v=  (Regval_Counterin v))`;


(*val Fcsr_of_regval : register_value -> maybe Fcsr*)

val _ = Define `
 ((Fcsr_of_regval:register_value ->(Fcsr)option) merge_var=  ((case merge_var of   Regval_Fcsr (v) => SOME v | _ => NONE )))`;


(*val regval_of_Fcsr : Fcsr -> register_value*)

val _ = Define `
 ((regval_of_Fcsr:Fcsr -> register_value) v=  (Regval_Fcsr v))`;


(*val Mcause_of_regval : register_value -> maybe Mcause*)

val _ = Define `
 ((Mcause_of_regval:register_value ->(Mcause)option) merge_var=
    ((case merge_var of   Regval_Mcause (v) => SOME v | _ => NONE )))`;


(*val regval_of_Mcause : Mcause -> register_value*)

val _ = Define `
 ((regval_of_Mcause:Mcause -> register_value) v=  (Regval_Mcause v))`;


(*val Medeleg_of_regval : register_value -> maybe Medeleg*)

val _ = Define `
 ((Medeleg_of_regval:register_value ->(Medeleg)option) merge_var=
    ((case merge_var of   Regval_Medeleg (v) => SOME v | _ => NONE )))`;


(*val regval_of_Medeleg : Medeleg -> register_value*)

val _ = Define `
 ((regval_of_Medeleg:Medeleg -> register_value) v=  (Regval_Medeleg v))`;


(*val Minterrupts_of_regval : register_value -> maybe Minterrupts*)

val _ = Define `
 ((Minterrupts_of_regval:register_value ->(Minterrupts)option) merge_var=
    ((case merge_var of   Regval_Minterrupts (v) => SOME v | _ => NONE )))`;


(*val regval_of_Minterrupts : Minterrupts -> register_value*)

val _ = Define `
 ((regval_of_Minterrupts:Minterrupts -> register_value) v=  (Regval_Minterrupts v))`;


(*val Misa_of_regval : register_value -> maybe Misa*)

val _ = Define `
 ((Misa_of_regval:register_value ->(Misa)option) merge_var=  ((case merge_var of   Regval_Misa (v) => SOME v | _ => NONE )))`;


(*val regval_of_Misa : Misa -> register_value*)

val _ = Define `
 ((regval_of_Misa:Misa -> register_value) v=  (Regval_Misa v))`;


(*val Mstatus_of_regval : register_value -> maybe Mstatus*)

val _ = Define `
 ((Mstatus_of_regval:register_value ->(Mstatus)option) merge_var=
    ((case merge_var of   Regval_Mstatus (v) => SOME v | _ => NONE )))`;


(*val regval_of_Mstatus : Mstatus -> register_value*)

val _ = Define `
 ((regval_of_Mstatus:Mstatus -> register_value) v=  (Regval_Mstatus v))`;


(*val Mstatush_of_regval : register_value -> maybe Mstatush*)

val _ = Define `
 ((Mstatush_of_regval:register_value ->(Mstatush)option) merge_var=
    ((case merge_var of   Regval_Mstatush (v) => SOME v | _ => NONE )))`;


(*val regval_of_Mstatush : Mstatush -> register_value*)

val _ = Define `
 ((regval_of_Mstatush:Mstatush -> register_value) v=  (Regval_Mstatush v))`;


(*val Mtvec_of_regval : register_value -> maybe Mtvec*)

val _ = Define `
 ((Mtvec_of_regval:register_value ->(Mtvec)option) merge_var=  ((case merge_var of   Regval_Mtvec (v) => SOME v | _ => NONE )))`;


(*val regval_of_Mtvec : Mtvec -> register_value*)

val _ = Define `
 ((regval_of_Mtvec:Mtvec -> register_value) v=  (Regval_Mtvec v))`;


(*val Pmpcfg_ent_of_regval : register_value -> maybe Pmpcfg_ent*)

val _ = Define `
 ((Pmpcfg_ent_of_regval:register_value ->(Pmpcfg_ent)option) merge_var=
    ((case merge_var of   Regval_Pmpcfg_ent (v) => SOME v | _ => NONE )))`;


(*val regval_of_Pmpcfg_ent : Pmpcfg_ent -> register_value*)

val _ = Define `
 ((regval_of_Pmpcfg_ent:Pmpcfg_ent -> register_value) v=  (Regval_Pmpcfg_ent v))`;


(*val Privilege_of_regval : register_value -> maybe Privilege*)

val _ = Define `
 ((Privilege_of_regval:register_value ->(Privilege)option) merge_var=
    ((case merge_var of   Regval_Privilege (v) => SOME v | _ => NONE )))`;


(*val regval_of_Privilege : Privilege -> register_value*)

val _ = Define `
 ((regval_of_Privilege:Privilege -> register_value) v=  (Regval_Privilege v))`;


(*val Sedeleg_of_regval : register_value -> maybe Sedeleg*)

val _ = Define `
 ((Sedeleg_of_regval:register_value ->(Sedeleg)option) merge_var=
    ((case merge_var of   Regval_Sedeleg (v) => SOME v | _ => NONE )))`;


(*val regval_of_Sedeleg : Sedeleg -> register_value*)

val _ = Define `
 ((regval_of_Sedeleg:Sedeleg -> register_value) v=  (Regval_Sedeleg v))`;


(*val Sinterrupts_of_regval : register_value -> maybe Sinterrupts*)

val _ = Define `
 ((Sinterrupts_of_regval:register_value ->(Sinterrupts)option) merge_var=
    ((case merge_var of   Regval_Sinterrupts (v) => SOME v | _ => NONE )))`;


(*val regval_of_Sinterrupts : Sinterrupts -> register_value*)

val _ = Define `
 ((regval_of_Sinterrupts:Sinterrupts -> register_value) v=  (Regval_Sinterrupts v))`;


(*val TLB_Entry_9_32_34_32_of_regval : register_value -> maybe (TLB_Entry ty9 ty32 ty34 ty32)*)

val _ = Define `
 ((TLB_Entry_9_32_34_32_of_regval:register_value ->(((9),(32),(34),(32))TLB_Entry)option) merge_var=
    ((case merge_var of   Regval_TLB_Entry_9_32_34_32 (v) => SOME v | _ => NONE )))`;


(*val regval_of_TLB_Entry_9_32_34_32 : TLB_Entry ty9 ty32 ty34 ty32 -> register_value*)

val _ = Define `
 ((regval_of_TLB_Entry_9_32_34_32:((9),(32),(34),(32))TLB_Entry -> register_value) v=  (Regval_TLB_Entry_9_32_34_32 v))`;


(*val bit_of_regval : register_value -> maybe bitU*)

val _ = Define `
 ((bit_of_regval:register_value ->(bitU)option) merge_var=  ((case merge_var of   Regval_bit (v) => SOME v | _ => NONE )))`;


(*val regval_of_bit : bitU -> register_value*)

val _ = Define `
 ((regval_of_bit:bitU -> register_value) v=  (Regval_bit v))`;


(*val bitvector_32_dec_of_regval : register_value -> maybe (mword ty32)*)

val _ = Define `
 ((bitvector_32_dec_of_regval:register_value ->((32)words$word)option) merge_var=
    ((case merge_var of   Regval_bitvector_32_dec (v) => SOME v | _ => NONE )))`;


(*val regval_of_bitvector_32_dec : mword ty32 -> register_value*)

val _ = Define `
 ((regval_of_bitvector_32_dec:(32)words$word -> register_value) v=  (Regval_bitvector_32_dec v))`;


(*val bitvector_4_dec_of_regval : register_value -> maybe (mword ty4)*)

val _ = Define `
 ((bitvector_4_dec_of_regval:register_value ->((4)words$word)option) merge_var=
    ((case merge_var of   Regval_bitvector_4_dec (v) => SOME v | _ => NONE )))`;


(*val regval_of_bitvector_4_dec : mword ty4 -> register_value*)

val _ = Define `
 ((regval_of_bitvector_4_dec:(4)words$word -> register_value) v=  (Regval_bitvector_4_dec v))`;


(*val bitvector_64_dec_of_regval : register_value -> maybe (mword ty64)*)

val _ = Define `
 ((bitvector_64_dec_of_regval:register_value ->((64)words$word)option) merge_var=
    ((case merge_var of   Regval_bitvector_64_dec (v) => SOME v | _ => NONE )))`;


(*val regval_of_bitvector_64_dec : mword ty64 -> register_value*)

val _ = Define `
 ((regval_of_bitvector_64_dec:(64)words$word -> register_value) v=  (Regval_bitvector_64_dec v))`;


(*val bool_of_regval : register_value -> maybe bool*)

val _ = Define `
 ((bool_of_regval:register_value ->(bool)option) merge_var=  ((case merge_var of   Regval_bool (v) => SOME v | _ => NONE )))`;


(*val regval_of_bool : bool -> register_value*)

val _ = Define `
 ((regval_of_bool:bool -> register_value) v=  (Regval_bool v))`;




(*val vector_of_regval : forall 'a. (register_value -> maybe 'a) -> register_value -> maybe (list 'a)*)
val _ = Define `
 ((vector_of_regval:(register_value -> 'a option) -> register_value ->('a list)option) of_regval1= 
  (\x .  (case x of
               Regval_vector v => just_list (MAP of_regval1 v)
           | _ => NONE
         )))`;


(*val regval_of_vector : forall 'a. ('a -> register_value) -> list 'a -> register_value*)
val _ = Define `
 ((regval_of_vector:('a -> register_value) -> 'a list -> register_value) regval_of1 xs=  (Regval_vector (MAP regval_of1 xs)))`;


(*val list_of_regval : forall 'a. (register_value -> maybe 'a) -> register_value -> maybe (list 'a)*)
val _ = Define `
 ((list_of_regval:(register_value -> 'a option) -> register_value ->('a list)option) of_regval1= 
  (\x .  (case x of
               Regval_list v => just_list (MAP of_regval1 v)
           | _ => NONE
         )))`;


(*val regval_of_list : forall 'a. ('a -> register_value) -> list 'a -> register_value*)
val _ = Define `
 ((regval_of_list:('a -> register_value) -> 'a list -> register_value) regval_of1 xs=  (Regval_list (MAP regval_of1 xs)))`;


(*val option_of_regval : forall 'a. (register_value -> maybe 'a) -> register_value -> maybe (maybe 'a)*)
val _ = Define `
 ((option_of_regval:(register_value -> 'a option) -> register_value ->('a option)option) of_regval1= 
  (\x .  (case x of
               Regval_option v => SOME (OPTION_BIND v of_regval1)
           | _ => NONE
         )))`;


(*val regval_of_option : forall 'a. ('a -> register_value) -> maybe 'a -> register_value*)
val _ = Define `
 ((regval_of_option:('a -> register_value) -> 'a option -> register_value) regval_of1 v=  (Regval_option (OPTION_MAP regval_of1 v)))`;



val _ = Define `
 ((satp_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "satp";
  read_from := (\ s .  s.bitvector_32_dec_reg "satp");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "satp" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((tlb32_ref:((regstate),(register_value),((((9),(32),(34),(32))TLB_Entry)option))register_ref)=  (<|
  name := "tlb32";
  read_from := (\ s .  s.option_TLB_Entry_9_32_34_32_reg "tlb32");
  write_to := (\ v s .  (( s with<| option_TLB_Entry_9_32_34_32_reg :=
  (\ reg .  if reg = "tlb32" then v else s.option_TLB_Entry_9_32_34_32_reg reg) |>)));
  of_regval := (\ v .  option_of_regval (\ v .  TLB_Entry_9_32_34_32_of_regval v) v);
  regval_of := (\ v .  regval_of_option (\ v .  regval_of_TLB_Entry_9_32_34_32 v) v) |>))`;


val _ = Define `
 ((htif_payload_writes_ref:((regstate),(register_value),((4)words$word))register_ref)=  (<|
  name := "htif_payload_writes";
  read_from := (\ s .  s.bitvector_4_dec_reg "htif_payload_writes");
  write_to := (\ v s .  (( s with<| bitvector_4_dec_reg :=
  (\ reg .  if reg = "htif_payload_writes" then v else s.bitvector_4_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_4_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_4_dec v) |>))`;


val _ = Define `
 ((htif_cmd_write_ref:((regstate),(register_value),(bitU))register_ref)=  (<|
  name := "htif_cmd_write";
  read_from := (\ s .  s.bit_reg "htif_cmd_write");
  write_to := (\ v s .  (( s with<| bit_reg :=
  (\ reg .  if reg = "htif_cmd_write" then v else s.bit_reg reg) |>)));
  of_regval := (\ v .  bit_of_regval v);
  regval_of := (\ v .  regval_of_bit v) |>))`;


val _ = Define `
 ((htif_exit_code_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "htif_exit_code";
  read_from := (\ s .  s.bitvector_64_dec_reg "htif_exit_code");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "htif_exit_code" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((htif_done_ref:((regstate),(register_value),(bool))register_ref)=  (<|
  name := "htif_done";
  read_from := (\ s .  s.bool_reg "htif_done");
  write_to := (\ v s .  (( s with<| bool_reg :=
  (\ reg .  if reg = "htif_done" then v else s.bool_reg reg) |>)));
  of_regval := (\ v .  bool_of_regval v);
  regval_of := (\ v .  regval_of_bool v) |>))`;


val _ = Define `
 ((htif_tohost_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "htif_tohost";
  read_from := (\ s .  s.bitvector_64_dec_reg "htif_tohost");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "htif_tohost" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((mtimecmp_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "mtimecmp";
  read_from := (\ s .  s.bitvector_64_dec_reg "mtimecmp");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "mtimecmp" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((fcsr_ref:((regstate),(register_value),(Fcsr))register_ref)=  (<|
  name := "fcsr";
  read_from := (\ s .  s.Fcsr_reg "fcsr");
  write_to := (\ v s .  (( s with<| Fcsr_reg :=
  (\ reg .  if reg = "fcsr" then v else s.Fcsr_reg reg) |>)));
  of_regval := (\ v .  Fcsr_of_regval v);
  regval_of := (\ v .  regval_of_Fcsr v) |>))`;


val _ = Define `
 ((f31_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f31";
  read_from := (\ s .  s.bitvector_32_dec_reg "f31");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f31" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f30_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f30";
  read_from := (\ s .  s.bitvector_32_dec_reg "f30");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f30" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f29_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f29";
  read_from := (\ s .  s.bitvector_32_dec_reg "f29");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f29" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f28_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f28";
  read_from := (\ s .  s.bitvector_32_dec_reg "f28");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f28" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f27_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f27";
  read_from := (\ s .  s.bitvector_32_dec_reg "f27");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f27" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f26_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f26";
  read_from := (\ s .  s.bitvector_32_dec_reg "f26");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f26" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f25_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f25";
  read_from := (\ s .  s.bitvector_32_dec_reg "f25");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f25" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f24_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f24";
  read_from := (\ s .  s.bitvector_32_dec_reg "f24");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f24" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f23_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f23";
  read_from := (\ s .  s.bitvector_32_dec_reg "f23");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f23" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f22_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f22";
  read_from := (\ s .  s.bitvector_32_dec_reg "f22");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f22" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f21_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f21";
  read_from := (\ s .  s.bitvector_32_dec_reg "f21");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f21" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f20_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f20";
  read_from := (\ s .  s.bitvector_32_dec_reg "f20");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f20" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f19_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f19";
  read_from := (\ s .  s.bitvector_32_dec_reg "f19");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f19" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f18_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f18";
  read_from := (\ s .  s.bitvector_32_dec_reg "f18");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f18" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f17_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f17";
  read_from := (\ s .  s.bitvector_32_dec_reg "f17");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f17" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f16_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f16";
  read_from := (\ s .  s.bitvector_32_dec_reg "f16");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f16" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f15_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f15";
  read_from := (\ s .  s.bitvector_32_dec_reg "f15");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f15" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f14_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f14";
  read_from := (\ s .  s.bitvector_32_dec_reg "f14");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f14" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f13_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f13";
  read_from := (\ s .  s.bitvector_32_dec_reg "f13");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f13" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f12_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f12";
  read_from := (\ s .  s.bitvector_32_dec_reg "f12");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f12" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f11_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f11";
  read_from := (\ s .  s.bitvector_32_dec_reg "f11");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f11" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f10_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f10";
  read_from := (\ s .  s.bitvector_32_dec_reg "f10");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f10" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f9_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f9";
  read_from := (\ s .  s.bitvector_32_dec_reg "f9");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f9" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f8_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f8";
  read_from := (\ s .  s.bitvector_32_dec_reg "f8");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f8" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f7_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f7";
  read_from := (\ s .  s.bitvector_32_dec_reg "f7");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f7" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f6_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f6";
  read_from := (\ s .  s.bitvector_32_dec_reg "f6");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f6" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f5_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f5";
  read_from := (\ s .  s.bitvector_32_dec_reg "f5");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f5" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f4_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f4";
  read_from := (\ s .  s.bitvector_32_dec_reg "f4");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f4" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f3_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f3";
  read_from := (\ s .  s.bitvector_32_dec_reg "f3");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f3" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f2_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f2";
  read_from := (\ s .  s.bitvector_32_dec_reg "f2");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f2" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f1_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f1";
  read_from := (\ s .  s.bitvector_32_dec_reg "f1");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f1" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((f0_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "f0";
  read_from := (\ s .  s.bitvector_32_dec_reg "f0");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "f0" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((float_fflags_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "float_fflags";
  read_from := (\ s .  s.bitvector_64_dec_reg "float_fflags");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "float_fflags" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((float_result_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "float_result";
  read_from := (\ s .  s.bitvector_64_dec_reg "float_result");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "float_result" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((utval_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "utval";
  read_from := (\ s .  s.bitvector_32_dec_reg "utval");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "utval" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((ucause_ref:((regstate),(register_value),(Mcause))register_ref)=  (<|
  name := "ucause";
  read_from := (\ s .  s.Mcause_reg "ucause");
  write_to := (\ v s .  (( s with<| Mcause_reg :=
  (\ reg .  if reg = "ucause" then v else s.Mcause_reg reg) |>)));
  of_regval := (\ v .  Mcause_of_regval v);
  regval_of := (\ v .  regval_of_Mcause v) |>))`;


val _ = Define `
 ((uepc_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "uepc";
  read_from := (\ s .  s.bitvector_32_dec_reg "uepc");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "uepc" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((uscratch_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "uscratch";
  read_from := (\ s .  s.bitvector_32_dec_reg "uscratch");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "uscratch" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((utvec_ref:((regstate),(register_value),(Mtvec))register_ref)=  (<|
  name := "utvec";
  read_from := (\ s .  s.Mtvec_reg "utvec");
  write_to := (\ v s .  (( s with<| Mtvec_reg :=
  (\ reg .  if reg = "utvec" then v else s.Mtvec_reg reg) |>)));
  of_regval := (\ v .  Mtvec_of_regval v);
  regval_of := (\ v .  regval_of_Mtvec v) |>))`;


val _ = Define `
 ((pmpaddr15_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr15";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr15");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr15" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr14_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr14";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr14");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr14" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr13_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr13";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr13");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr13" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr12_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr12";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr12");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr12" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr11_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr11";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr11");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr11" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr10_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr10";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr10");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr10" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr9_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr9";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr9");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr9" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr8_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr8";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr8");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr8" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr7_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr7";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr7");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr7" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr6_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr6";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr6");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr6" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr5_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr5";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr5");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr5" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr4_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr4";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr4");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr4" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr3_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr3";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr3");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr3" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr2_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr2";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr2");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr2" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr1_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr1";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr1");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr1" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmpaddr0_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "pmpaddr0";
  read_from := (\ s .  s.bitvector_32_dec_reg "pmpaddr0");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "pmpaddr0" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((pmp15cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp15cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp15cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp15cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp14cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp14cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp14cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp14cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp13cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp13cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp13cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp13cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp12cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp12cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp12cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp12cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp11cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp11cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp11cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp11cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp10cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp10cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp10cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp10cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp9cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp9cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp9cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp9cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp8cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp8cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp8cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp8cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp7cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp7cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp7cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp7cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp6cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp6cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp6cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp6cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp5cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp5cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp5cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp5cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp4cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp4cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp4cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp4cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp3cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp3cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp3cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp3cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp2cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp2cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp2cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp2cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp1cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp1cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp1cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp1cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((pmp0cfg_ref:((regstate),(register_value),(Pmpcfg_ent))register_ref)=  (<|
  name := "pmp0cfg";
  read_from := (\ s .  s.Pmpcfg_ent_reg "pmp0cfg");
  write_to := (\ v s .  (( s with<| Pmpcfg_ent_reg :=
  (\ reg .  if reg = "pmp0cfg" then v else s.Pmpcfg_ent_reg reg) |>)));
  of_regval := (\ v .  Pmpcfg_ent_of_regval v);
  regval_of := (\ v .  regval_of_Pmpcfg_ent v) |>))`;


val _ = Define `
 ((tselect_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "tselect";
  read_from := (\ s .  s.bitvector_32_dec_reg "tselect");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "tselect" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((stval_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "stval";
  read_from := (\ s .  s.bitvector_32_dec_reg "stval");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "stval" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((scause_ref:((regstate),(register_value),(Mcause))register_ref)=  (<|
  name := "scause";
  read_from := (\ s .  s.Mcause_reg "scause");
  write_to := (\ v s .  (( s with<| Mcause_reg :=
  (\ reg .  if reg = "scause" then v else s.Mcause_reg reg) |>)));
  of_regval := (\ v .  Mcause_of_regval v);
  regval_of := (\ v .  regval_of_Mcause v) |>))`;


val _ = Define `
 ((sepc_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "sepc";
  read_from := (\ s .  s.bitvector_32_dec_reg "sepc");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "sepc" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((sscratch_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "sscratch";
  read_from := (\ s .  s.bitvector_32_dec_reg "sscratch");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "sscratch" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((stvec_ref:((regstate),(register_value),(Mtvec))register_ref)=  (<|
  name := "stvec";
  read_from := (\ s .  s.Mtvec_reg "stvec");
  write_to := (\ v s .  (( s with<| Mtvec_reg :=
  (\ reg .  if reg = "stvec" then v else s.Mtvec_reg reg) |>)));
  of_regval := (\ v .  Mtvec_of_regval v);
  regval_of := (\ v .  regval_of_Mtvec v) |>))`;


val _ = Define `
 ((sideleg_ref:((regstate),(register_value),(Sinterrupts))register_ref)=  (<|
  name := "sideleg";
  read_from := (\ s .  s.Sinterrupts_reg "sideleg");
  write_to := (\ v s .  (( s with<| Sinterrupts_reg :=
  (\ reg .  if reg = "sideleg" then v else s.Sinterrupts_reg reg) |>)));
  of_regval := (\ v .  Sinterrupts_of_regval v);
  regval_of := (\ v .  regval_of_Sinterrupts v) |>))`;


val _ = Define `
 ((sedeleg_ref:((regstate),(register_value),(Sedeleg))register_ref)=  (<|
  name := "sedeleg";
  read_from := (\ s .  s.Sedeleg_reg "sedeleg");
  write_to := (\ v s .  (( s with<| Sedeleg_reg :=
  (\ reg .  if reg = "sedeleg" then v else s.Sedeleg_reg reg) |>)));
  of_regval := (\ v .  Sedeleg_of_regval v);
  regval_of := (\ v .  regval_of_Sedeleg v) |>))`;


val _ = Define `
 ((mhartid_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "mhartid";
  read_from := (\ s .  s.bitvector_32_dec_reg "mhartid");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "mhartid" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((marchid_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "marchid";
  read_from := (\ s .  s.bitvector_32_dec_reg "marchid");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "marchid" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((mimpid_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "mimpid";
  read_from := (\ s .  s.bitvector_32_dec_reg "mimpid");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "mimpid" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((mvendorid_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "mvendorid";
  read_from := (\ s .  s.bitvector_32_dec_reg "mvendorid");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "mvendorid" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((minstret_written_ref:((regstate),(register_value),(bool))register_ref)=  (<|
  name := "minstret_written";
  read_from := (\ s .  s.bool_reg "minstret_written");
  write_to := (\ v s .  (( s with<| bool_reg :=
  (\ reg .  if reg = "minstret_written" then v else s.bool_reg reg) |>)));
  of_regval := (\ v .  bool_of_regval v);
  regval_of := (\ v .  regval_of_bool v) |>))`;


val _ = Define `
 ((minstret_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "minstret";
  read_from := (\ s .  s.bitvector_64_dec_reg "minstret");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "minstret" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((mtime_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "mtime";
  read_from := (\ s .  s.bitvector_64_dec_reg "mtime");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "mtime" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((mcycle_ref:((regstate),(register_value),((64)words$word))register_ref)=  (<|
  name := "mcycle";
  read_from := (\ s .  s.bitvector_64_dec_reg "mcycle");
  write_to := (\ v s .  (( s with<| bitvector_64_dec_reg :=
  (\ reg .  if reg = "mcycle" then v else s.bitvector_64_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_64_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_64_dec v) |>))`;


val _ = Define `
 ((mcountinhibit_ref:((regstate),(register_value),(Counterin))register_ref)=  (<|
  name := "mcountinhibit";
  read_from := (\ s .  s.Counterin_reg "mcountinhibit");
  write_to := (\ v s .  (( s with<| Counterin_reg :=
  (\ reg .  if reg = "mcountinhibit" then v else s.Counterin_reg reg) |>)));
  of_regval := (\ v .  Counterin_of_regval v);
  regval_of := (\ v .  regval_of_Counterin v) |>))`;


val _ = Define `
 ((scounteren_ref:((regstate),(register_value),(Counteren))register_ref)=  (<|
  name := "scounteren";
  read_from := (\ s .  s.Counteren_reg "scounteren");
  write_to := (\ v s .  (( s with<| Counteren_reg :=
  (\ reg .  if reg = "scounteren" then v else s.Counteren_reg reg) |>)));
  of_regval := (\ v .  Counteren_of_regval v);
  regval_of := (\ v .  regval_of_Counteren v) |>))`;


val _ = Define `
 ((mcounteren_ref:((regstate),(register_value),(Counteren))register_ref)=  (<|
  name := "mcounteren";
  read_from := (\ s .  s.Counteren_reg "mcounteren");
  write_to := (\ v s .  (( s with<| Counteren_reg :=
  (\ reg .  if reg = "mcounteren" then v else s.Counteren_reg reg) |>)));
  of_regval := (\ v .  Counteren_of_regval v);
  regval_of := (\ v .  regval_of_Counteren v) |>))`;


val _ = Define `
 ((mscratch_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "mscratch";
  read_from := (\ s .  s.bitvector_32_dec_reg "mscratch");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "mscratch" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((mtval_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "mtval";
  read_from := (\ s .  s.bitvector_32_dec_reg "mtval");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "mtval" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((mepc_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "mepc";
  read_from := (\ s .  s.bitvector_32_dec_reg "mepc");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "mepc" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((mcause_ref:((regstate),(register_value),(Mcause))register_ref)=  (<|
  name := "mcause";
  read_from := (\ s .  s.Mcause_reg "mcause");
  write_to := (\ v s .  (( s with<| Mcause_reg :=
  (\ reg .  if reg = "mcause" then v else s.Mcause_reg reg) |>)));
  of_regval := (\ v .  Mcause_of_regval v);
  regval_of := (\ v .  regval_of_Mcause v) |>))`;


val _ = Define `
 ((mtvec_ref:((regstate),(register_value),(Mtvec))register_ref)=  (<|
  name := "mtvec";
  read_from := (\ s .  s.Mtvec_reg "mtvec");
  write_to := (\ v s .  (( s with<| Mtvec_reg :=
  (\ reg .  if reg = "mtvec" then v else s.Mtvec_reg reg) |>)));
  of_regval := (\ v .  Mtvec_of_regval v);
  regval_of := (\ v .  regval_of_Mtvec v) |>))`;


val _ = Define `
 ((medeleg_ref:((regstate),(register_value),(Medeleg))register_ref)=  (<|
  name := "medeleg";
  read_from := (\ s .  s.Medeleg_reg "medeleg");
  write_to := (\ v s .  (( s with<| Medeleg_reg :=
  (\ reg .  if reg = "medeleg" then v else s.Medeleg_reg reg) |>)));
  of_regval := (\ v .  Medeleg_of_regval v);
  regval_of := (\ v .  regval_of_Medeleg v) |>))`;


val _ = Define `
 ((mideleg_ref:((regstate),(register_value),(Minterrupts))register_ref)=  (<|
  name := "mideleg";
  read_from := (\ s .  s.Minterrupts_reg "mideleg");
  write_to := (\ v s .  (( s with<| Minterrupts_reg :=
  (\ reg .  if reg = "mideleg" then v else s.Minterrupts_reg reg) |>)));
  of_regval := (\ v .  Minterrupts_of_regval v);
  regval_of := (\ v .  regval_of_Minterrupts v) |>))`;


val _ = Define `
 ((mie_ref:((regstate),(register_value),(Minterrupts))register_ref)=  (<|
  name := "mie";
  read_from := (\ s .  s.Minterrupts_reg "mie");
  write_to := (\ v s .  (( s with<| Minterrupts_reg :=
  (\ reg .  if reg = "mie" then v else s.Minterrupts_reg reg) |>)));
  of_regval := (\ v .  Minterrupts_of_regval v);
  regval_of := (\ v .  regval_of_Minterrupts v) |>))`;


val _ = Define `
 ((mip_ref:((regstate),(register_value),(Minterrupts))register_ref)=  (<|
  name := "mip";
  read_from := (\ s .  s.Minterrupts_reg "mip");
  write_to := (\ v s .  (( s with<| Minterrupts_reg :=
  (\ reg .  if reg = "mip" then v else s.Minterrupts_reg reg) |>)));
  of_regval := (\ v .  Minterrupts_of_regval v);
  regval_of := (\ v .  regval_of_Minterrupts v) |>))`;


val _ = Define `
 ((mstatus_ref:((regstate),(register_value),(Mstatus))register_ref)=  (<|
  name := "mstatus";
  read_from := (\ s .  s.Mstatus_reg "mstatus");
  write_to := (\ v s .  (( s with<| Mstatus_reg :=
  (\ reg .  if reg = "mstatus" then v else s.Mstatus_reg reg) |>)));
  of_regval := (\ v .  Mstatus_of_regval v);
  regval_of := (\ v .  regval_of_Mstatus v) |>))`;


val _ = Define `
 ((mstatush_ref:((regstate),(register_value),(Mstatush))register_ref)=  (<|
  name := "mstatush";
  read_from := (\ s .  s.Mstatush_reg "mstatush");
  write_to := (\ v s .  (( s with<| Mstatush_reg :=
  (\ reg .  if reg = "mstatush" then v else s.Mstatush_reg reg) |>)));
  of_regval := (\ v .  Mstatush_of_regval v);
  regval_of := (\ v .  regval_of_Mstatush v) |>))`;


val _ = Define `
 ((misa_ref:((regstate),(register_value),(Misa))register_ref)=  (<|
  name := "misa";
  read_from := (\ s .  s.Misa_reg "misa");
  write_to := (\ v s .  (( s with<| Misa_reg :=
  (\ reg .  if reg = "misa" then v else s.Misa_reg reg) |>)));
  of_regval := (\ v .  Misa_of_regval v);
  regval_of := (\ v .  regval_of_Misa v) |>))`;


val _ = Define `
 ((cur_inst_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "cur_inst";
  read_from := (\ s .  s.bitvector_32_dec_reg "cur_inst");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "cur_inst" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((cur_privilege_ref:((regstate),(register_value),(Privilege))register_ref)=  (<|
  name := "cur_privilege";
  read_from := (\ s .  s.Privilege_reg "cur_privilege");
  write_to := (\ v s .  (( s with<| Privilege_reg :=
  (\ reg .  if reg = "cur_privilege" then v else s.Privilege_reg reg) |>)));
  of_regval := (\ v .  Privilege_of_regval v);
  regval_of := (\ v .  regval_of_Privilege v) |>))`;


val _ = Define `
 ((x31_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x31";
  read_from := (\ s .  s.bitvector_32_dec_reg "x31");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x31" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x30_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x30";
  read_from := (\ s .  s.bitvector_32_dec_reg "x30");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x30" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x29_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x29";
  read_from := (\ s .  s.bitvector_32_dec_reg "x29");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x29" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x28_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x28";
  read_from := (\ s .  s.bitvector_32_dec_reg "x28");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x28" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x27_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x27";
  read_from := (\ s .  s.bitvector_32_dec_reg "x27");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x27" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x26_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x26";
  read_from := (\ s .  s.bitvector_32_dec_reg "x26");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x26" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x25_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x25";
  read_from := (\ s .  s.bitvector_32_dec_reg "x25");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x25" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x24_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x24";
  read_from := (\ s .  s.bitvector_32_dec_reg "x24");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x24" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x23_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x23";
  read_from := (\ s .  s.bitvector_32_dec_reg "x23");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x23" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x22_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x22";
  read_from := (\ s .  s.bitvector_32_dec_reg "x22");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x22" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x21_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x21";
  read_from := (\ s .  s.bitvector_32_dec_reg "x21");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x21" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x20_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x20";
  read_from := (\ s .  s.bitvector_32_dec_reg "x20");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x20" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x19_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x19";
  read_from := (\ s .  s.bitvector_32_dec_reg "x19");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x19" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x18_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x18";
  read_from := (\ s .  s.bitvector_32_dec_reg "x18");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x18" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x17_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x17";
  read_from := (\ s .  s.bitvector_32_dec_reg "x17");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x17" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x16_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x16";
  read_from := (\ s .  s.bitvector_32_dec_reg "x16");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x16" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x15_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x15";
  read_from := (\ s .  s.bitvector_32_dec_reg "x15");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x15" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x14_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x14";
  read_from := (\ s .  s.bitvector_32_dec_reg "x14");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x14" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x13_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x13";
  read_from := (\ s .  s.bitvector_32_dec_reg "x13");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x13" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x12_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x12";
  read_from := (\ s .  s.bitvector_32_dec_reg "x12");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x12" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x11_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x11";
  read_from := (\ s .  s.bitvector_32_dec_reg "x11");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x11" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x10_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x10";
  read_from := (\ s .  s.bitvector_32_dec_reg "x10");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x10" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x9_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x9";
  read_from := (\ s .  s.bitvector_32_dec_reg "x9");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x9" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x8_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x8";
  read_from := (\ s .  s.bitvector_32_dec_reg "x8");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x8" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x7_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x7";
  read_from := (\ s .  s.bitvector_32_dec_reg "x7");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x7" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x6_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x6";
  read_from := (\ s .  s.bitvector_32_dec_reg "x6");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x6" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x5_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x5";
  read_from := (\ s .  s.bitvector_32_dec_reg "x5");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x5" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x4_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x4";
  read_from := (\ s .  s.bitvector_32_dec_reg "x4");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x4" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x3_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x3";
  read_from := (\ s .  s.bitvector_32_dec_reg "x3");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x3" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x2_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x2";
  read_from := (\ s .  s.bitvector_32_dec_reg "x2");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x2" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((x1_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "x1";
  read_from := (\ s .  s.bitvector_32_dec_reg "x1");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "x1" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((instbits_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "instbits";
  read_from := (\ s .  s.bitvector_32_dec_reg "instbits");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "instbits" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((nextPC_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "nextPC";
  read_from := (\ s .  s.bitvector_32_dec_reg "nextPC");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "nextPC" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


val _ = Define `
 ((PC_ref:((regstate),(register_value),((32)words$word))register_ref)=  (<|
  name := "PC";
  read_from := (\ s .  s.bitvector_32_dec_reg "PC");
  write_to := (\ v s .  (( s with<| bitvector_32_dec_reg :=
  (\ reg .  if reg = "PC" then v else s.bitvector_32_dec_reg reg) |>)));
  of_regval := (\ v .  bitvector_32_dec_of_regval v);
  regval_of := (\ v .  regval_of_bitvector_32_dec v) |>))`;


(*val get_regval : string -> regstate -> maybe register_value*)
val _ = Define `
 ((get_regval:string -> regstate ->(register_value)option) reg_name s=
   (if reg_name = "satp" then SOME (satp_ref.regval_of (satp_ref.read_from s)) else
  if reg_name = "tlb32" then SOME (tlb32_ref.regval_of (tlb32_ref.read_from s)) else
  if reg_name = "htif_payload_writes" then SOME (htif_payload_writes_ref.regval_of (htif_payload_writes_ref.read_from s)) else
  if reg_name = "htif_cmd_write" then SOME (htif_cmd_write_ref.regval_of (htif_cmd_write_ref.read_from s)) else
  if reg_name = "htif_exit_code" then SOME (htif_exit_code_ref.regval_of (htif_exit_code_ref.read_from s)) else
  if reg_name = "htif_done" then SOME (htif_done_ref.regval_of (htif_done_ref.read_from s)) else
  if reg_name = "htif_tohost" then SOME (htif_tohost_ref.regval_of (htif_tohost_ref.read_from s)) else
  if reg_name = "mtimecmp" then SOME (mtimecmp_ref.regval_of (mtimecmp_ref.read_from s)) else
  if reg_name = "fcsr" then SOME (fcsr_ref.regval_of (fcsr_ref.read_from s)) else
  if reg_name = "f31" then SOME (f31_ref.regval_of (f31_ref.read_from s)) else
  if reg_name = "f30" then SOME (f30_ref.regval_of (f30_ref.read_from s)) else
  if reg_name = "f29" then SOME (f29_ref.regval_of (f29_ref.read_from s)) else
  if reg_name = "f28" then SOME (f28_ref.regval_of (f28_ref.read_from s)) else
  if reg_name = "f27" then SOME (f27_ref.regval_of (f27_ref.read_from s)) else
  if reg_name = "f26" then SOME (f26_ref.regval_of (f26_ref.read_from s)) else
  if reg_name = "f25" then SOME (f25_ref.regval_of (f25_ref.read_from s)) else
  if reg_name = "f24" then SOME (f24_ref.regval_of (f24_ref.read_from s)) else
  if reg_name = "f23" then SOME (f23_ref.regval_of (f23_ref.read_from s)) else
  if reg_name = "f22" then SOME (f22_ref.regval_of (f22_ref.read_from s)) else
  if reg_name = "f21" then SOME (f21_ref.regval_of (f21_ref.read_from s)) else
  if reg_name = "f20" then SOME (f20_ref.regval_of (f20_ref.read_from s)) else
  if reg_name = "f19" then SOME (f19_ref.regval_of (f19_ref.read_from s)) else
  if reg_name = "f18" then SOME (f18_ref.regval_of (f18_ref.read_from s)) else
  if reg_name = "f17" then SOME (f17_ref.regval_of (f17_ref.read_from s)) else
  if reg_name = "f16" then SOME (f16_ref.regval_of (f16_ref.read_from s)) else
  if reg_name = "f15" then SOME (f15_ref.regval_of (f15_ref.read_from s)) else
  if reg_name = "f14" then SOME (f14_ref.regval_of (f14_ref.read_from s)) else
  if reg_name = "f13" then SOME (f13_ref.regval_of (f13_ref.read_from s)) else
  if reg_name = "f12" then SOME (f12_ref.regval_of (f12_ref.read_from s)) else
  if reg_name = "f11" then SOME (f11_ref.regval_of (f11_ref.read_from s)) else
  if reg_name = "f10" then SOME (f10_ref.regval_of (f10_ref.read_from s)) else
  if reg_name = "f9" then SOME (f9_ref.regval_of (f9_ref.read_from s)) else
  if reg_name = "f8" then SOME (f8_ref.regval_of (f8_ref.read_from s)) else
  if reg_name = "f7" then SOME (f7_ref.regval_of (f7_ref.read_from s)) else
  if reg_name = "f6" then SOME (f6_ref.regval_of (f6_ref.read_from s)) else
  if reg_name = "f5" then SOME (f5_ref.regval_of (f5_ref.read_from s)) else
  if reg_name = "f4" then SOME (f4_ref.regval_of (f4_ref.read_from s)) else
  if reg_name = "f3" then SOME (f3_ref.regval_of (f3_ref.read_from s)) else
  if reg_name = "f2" then SOME (f2_ref.regval_of (f2_ref.read_from s)) else
  if reg_name = "f1" then SOME (f1_ref.regval_of (f1_ref.read_from s)) else
  if reg_name = "f0" then SOME (f0_ref.regval_of (f0_ref.read_from s)) else
  if reg_name = "float_fflags" then SOME (float_fflags_ref.regval_of (float_fflags_ref.read_from s)) else
  if reg_name = "float_result" then SOME (float_result_ref.regval_of (float_result_ref.read_from s)) else
  if reg_name = "utval" then SOME (utval_ref.regval_of (utval_ref.read_from s)) else
  if reg_name = "ucause" then SOME (ucause_ref.regval_of (ucause_ref.read_from s)) else
  if reg_name = "uepc" then SOME (uepc_ref.regval_of (uepc_ref.read_from s)) else
  if reg_name = "uscratch" then SOME (uscratch_ref.regval_of (uscratch_ref.read_from s)) else
  if reg_name = "utvec" then SOME (utvec_ref.regval_of (utvec_ref.read_from s)) else
  if reg_name = "pmpaddr15" then SOME (pmpaddr15_ref.regval_of (pmpaddr15_ref.read_from s)) else
  if reg_name = "pmpaddr14" then SOME (pmpaddr14_ref.regval_of (pmpaddr14_ref.read_from s)) else
  if reg_name = "pmpaddr13" then SOME (pmpaddr13_ref.regval_of (pmpaddr13_ref.read_from s)) else
  if reg_name = "pmpaddr12" then SOME (pmpaddr12_ref.regval_of (pmpaddr12_ref.read_from s)) else
  if reg_name = "pmpaddr11" then SOME (pmpaddr11_ref.regval_of (pmpaddr11_ref.read_from s)) else
  if reg_name = "pmpaddr10" then SOME (pmpaddr10_ref.regval_of (pmpaddr10_ref.read_from s)) else
  if reg_name = "pmpaddr9" then SOME (pmpaddr9_ref.regval_of (pmpaddr9_ref.read_from s)) else
  if reg_name = "pmpaddr8" then SOME (pmpaddr8_ref.regval_of (pmpaddr8_ref.read_from s)) else
  if reg_name = "pmpaddr7" then SOME (pmpaddr7_ref.regval_of (pmpaddr7_ref.read_from s)) else
  if reg_name = "pmpaddr6" then SOME (pmpaddr6_ref.regval_of (pmpaddr6_ref.read_from s)) else
  if reg_name = "pmpaddr5" then SOME (pmpaddr5_ref.regval_of (pmpaddr5_ref.read_from s)) else
  if reg_name = "pmpaddr4" then SOME (pmpaddr4_ref.regval_of (pmpaddr4_ref.read_from s)) else
  if reg_name = "pmpaddr3" then SOME (pmpaddr3_ref.regval_of (pmpaddr3_ref.read_from s)) else
  if reg_name = "pmpaddr2" then SOME (pmpaddr2_ref.regval_of (pmpaddr2_ref.read_from s)) else
  if reg_name = "pmpaddr1" then SOME (pmpaddr1_ref.regval_of (pmpaddr1_ref.read_from s)) else
  if reg_name = "pmpaddr0" then SOME (pmpaddr0_ref.regval_of (pmpaddr0_ref.read_from s)) else
  if reg_name = "pmp15cfg" then SOME (pmp15cfg_ref.regval_of (pmp15cfg_ref.read_from s)) else
  if reg_name = "pmp14cfg" then SOME (pmp14cfg_ref.regval_of (pmp14cfg_ref.read_from s)) else
  if reg_name = "pmp13cfg" then SOME (pmp13cfg_ref.regval_of (pmp13cfg_ref.read_from s)) else
  if reg_name = "pmp12cfg" then SOME (pmp12cfg_ref.regval_of (pmp12cfg_ref.read_from s)) else
  if reg_name = "pmp11cfg" then SOME (pmp11cfg_ref.regval_of (pmp11cfg_ref.read_from s)) else
  if reg_name = "pmp10cfg" then SOME (pmp10cfg_ref.regval_of (pmp10cfg_ref.read_from s)) else
  if reg_name = "pmp9cfg" then SOME (pmp9cfg_ref.regval_of (pmp9cfg_ref.read_from s)) else
  if reg_name = "pmp8cfg" then SOME (pmp8cfg_ref.regval_of (pmp8cfg_ref.read_from s)) else
  if reg_name = "pmp7cfg" then SOME (pmp7cfg_ref.regval_of (pmp7cfg_ref.read_from s)) else
  if reg_name = "pmp6cfg" then SOME (pmp6cfg_ref.regval_of (pmp6cfg_ref.read_from s)) else
  if reg_name = "pmp5cfg" then SOME (pmp5cfg_ref.regval_of (pmp5cfg_ref.read_from s)) else
  if reg_name = "pmp4cfg" then SOME (pmp4cfg_ref.regval_of (pmp4cfg_ref.read_from s)) else
  if reg_name = "pmp3cfg" then SOME (pmp3cfg_ref.regval_of (pmp3cfg_ref.read_from s)) else
  if reg_name = "pmp2cfg" then SOME (pmp2cfg_ref.regval_of (pmp2cfg_ref.read_from s)) else
  if reg_name = "pmp1cfg" then SOME (pmp1cfg_ref.regval_of (pmp1cfg_ref.read_from s)) else
  if reg_name = "pmp0cfg" then SOME (pmp0cfg_ref.regval_of (pmp0cfg_ref.read_from s)) else
  if reg_name = "tselect" then SOME (tselect_ref.regval_of (tselect_ref.read_from s)) else
  if reg_name = "stval" then SOME (stval_ref.regval_of (stval_ref.read_from s)) else
  if reg_name = "scause" then SOME (scause_ref.regval_of (scause_ref.read_from s)) else
  if reg_name = "sepc" then SOME (sepc_ref.regval_of (sepc_ref.read_from s)) else
  if reg_name = "sscratch" then SOME (sscratch_ref.regval_of (sscratch_ref.read_from s)) else
  if reg_name = "stvec" then SOME (stvec_ref.regval_of (stvec_ref.read_from s)) else
  if reg_name = "sideleg" then SOME (sideleg_ref.regval_of (sideleg_ref.read_from s)) else
  if reg_name = "sedeleg" then SOME (sedeleg_ref.regval_of (sedeleg_ref.read_from s)) else
  if reg_name = "mhartid" then SOME (mhartid_ref.regval_of (mhartid_ref.read_from s)) else
  if reg_name = "marchid" then SOME (marchid_ref.regval_of (marchid_ref.read_from s)) else
  if reg_name = "mimpid" then SOME (mimpid_ref.regval_of (mimpid_ref.read_from s)) else
  if reg_name = "mvendorid" then SOME (mvendorid_ref.regval_of (mvendorid_ref.read_from s)) else
  if reg_name = "minstret_written" then SOME (minstret_written_ref.regval_of (minstret_written_ref.read_from s)) else
  if reg_name = "minstret" then SOME (minstret_ref.regval_of (minstret_ref.read_from s)) else
  if reg_name = "mtime" then SOME (mtime_ref.regval_of (mtime_ref.read_from s)) else
  if reg_name = "mcycle" then SOME (mcycle_ref.regval_of (mcycle_ref.read_from s)) else
  if reg_name = "mcountinhibit" then SOME (mcountinhibit_ref.regval_of (mcountinhibit_ref.read_from s)) else
  if reg_name = "scounteren" then SOME (scounteren_ref.regval_of (scounteren_ref.read_from s)) else
  if reg_name = "mcounteren" then SOME (mcounteren_ref.regval_of (mcounteren_ref.read_from s)) else
  if reg_name = "mscratch" then SOME (mscratch_ref.regval_of (mscratch_ref.read_from s)) else
  if reg_name = "mtval" then SOME (mtval_ref.regval_of (mtval_ref.read_from s)) else
  if reg_name = "mepc" then SOME (mepc_ref.regval_of (mepc_ref.read_from s)) else
  if reg_name = "mcause" then SOME (mcause_ref.regval_of (mcause_ref.read_from s)) else
  if reg_name = "mtvec" then SOME (mtvec_ref.regval_of (mtvec_ref.read_from s)) else
  if reg_name = "medeleg" then SOME (medeleg_ref.regval_of (medeleg_ref.read_from s)) else
  if reg_name = "mideleg" then SOME (mideleg_ref.regval_of (mideleg_ref.read_from s)) else
  if reg_name = "mie" then SOME (mie_ref.regval_of (mie_ref.read_from s)) else
  if reg_name = "mip" then SOME (mip_ref.regval_of (mip_ref.read_from s)) else
  if reg_name = "mstatus" then SOME (mstatus_ref.regval_of (mstatus_ref.read_from s)) else
  if reg_name = "mstatush" then SOME (mstatush_ref.regval_of (mstatush_ref.read_from s)) else
  if reg_name = "misa" then SOME (misa_ref.regval_of (misa_ref.read_from s)) else
  if reg_name = "cur_inst" then SOME (cur_inst_ref.regval_of (cur_inst_ref.read_from s)) else
  if reg_name = "cur_privilege" then SOME (cur_privilege_ref.regval_of (cur_privilege_ref.read_from s)) else
  if reg_name = "x31" then SOME (x31_ref.regval_of (x31_ref.read_from s)) else
  if reg_name = "x30" then SOME (x30_ref.regval_of (x30_ref.read_from s)) else
  if reg_name = "x29" then SOME (x29_ref.regval_of (x29_ref.read_from s)) else
  if reg_name = "x28" then SOME (x28_ref.regval_of (x28_ref.read_from s)) else
  if reg_name = "x27" then SOME (x27_ref.regval_of (x27_ref.read_from s)) else
  if reg_name = "x26" then SOME (x26_ref.regval_of (x26_ref.read_from s)) else
  if reg_name = "x25" then SOME (x25_ref.regval_of (x25_ref.read_from s)) else
  if reg_name = "x24" then SOME (x24_ref.regval_of (x24_ref.read_from s)) else
  if reg_name = "x23" then SOME (x23_ref.regval_of (x23_ref.read_from s)) else
  if reg_name = "x22" then SOME (x22_ref.regval_of (x22_ref.read_from s)) else
  if reg_name = "x21" then SOME (x21_ref.regval_of (x21_ref.read_from s)) else
  if reg_name = "x20" then SOME (x20_ref.regval_of (x20_ref.read_from s)) else
  if reg_name = "x19" then SOME (x19_ref.regval_of (x19_ref.read_from s)) else
  if reg_name = "x18" then SOME (x18_ref.regval_of (x18_ref.read_from s)) else
  if reg_name = "x17" then SOME (x17_ref.regval_of (x17_ref.read_from s)) else
  if reg_name = "x16" then SOME (x16_ref.regval_of (x16_ref.read_from s)) else
  if reg_name = "x15" then SOME (x15_ref.regval_of (x15_ref.read_from s)) else
  if reg_name = "x14" then SOME (x14_ref.regval_of (x14_ref.read_from s)) else
  if reg_name = "x13" then SOME (x13_ref.regval_of (x13_ref.read_from s)) else
  if reg_name = "x12" then SOME (x12_ref.regval_of (x12_ref.read_from s)) else
  if reg_name = "x11" then SOME (x11_ref.regval_of (x11_ref.read_from s)) else
  if reg_name = "x10" then SOME (x10_ref.regval_of (x10_ref.read_from s)) else
  if reg_name = "x9" then SOME (x9_ref.regval_of (x9_ref.read_from s)) else
  if reg_name = "x8" then SOME (x8_ref.regval_of (x8_ref.read_from s)) else
  if reg_name = "x7" then SOME (x7_ref.regval_of (x7_ref.read_from s)) else
  if reg_name = "x6" then SOME (x6_ref.regval_of (x6_ref.read_from s)) else
  if reg_name = "x5" then SOME (x5_ref.regval_of (x5_ref.read_from s)) else
  if reg_name = "x4" then SOME (x4_ref.regval_of (x4_ref.read_from s)) else
  if reg_name = "x3" then SOME (x3_ref.regval_of (x3_ref.read_from s)) else
  if reg_name = "x2" then SOME (x2_ref.regval_of (x2_ref.read_from s)) else
  if reg_name = "x1" then SOME (x1_ref.regval_of (x1_ref.read_from s)) else
  if reg_name = "instbits" then SOME (instbits_ref.regval_of (instbits_ref.read_from s)) else
  if reg_name = "nextPC" then SOME (nextPC_ref.regval_of (nextPC_ref.read_from s)) else
  if reg_name = "PC" then SOME (PC_ref.regval_of (PC_ref.read_from s)) else
  NONE))`;


(*val set_regval : string -> register_value -> regstate -> maybe regstate*)
val _ = Define `
 ((set_regval:string -> register_value -> regstate ->(regstate)option) reg_name v s=
   (if reg_name = "satp" then OPTION_MAP (\ v .  satp_ref.write_to v s) (satp_ref.of_regval v) else
  if reg_name = "tlb32" then OPTION_MAP (\ v .  tlb32_ref.write_to v s) (tlb32_ref.of_regval v) else
  if reg_name = "htif_payload_writes" then OPTION_MAP (\ v .  htif_payload_writes_ref.write_to v s) (htif_payload_writes_ref.of_regval v) else
  if reg_name = "htif_cmd_write" then OPTION_MAP (\ v .  htif_cmd_write_ref.write_to v s) (htif_cmd_write_ref.of_regval v) else
  if reg_name = "htif_exit_code" then OPTION_MAP (\ v .  htif_exit_code_ref.write_to v s) (htif_exit_code_ref.of_regval v) else
  if reg_name = "htif_done" then OPTION_MAP (\ v .  htif_done_ref.write_to v s) (htif_done_ref.of_regval v) else
  if reg_name = "htif_tohost" then OPTION_MAP (\ v .  htif_tohost_ref.write_to v s) (htif_tohost_ref.of_regval v) else
  if reg_name = "mtimecmp" then OPTION_MAP (\ v .  mtimecmp_ref.write_to v s) (mtimecmp_ref.of_regval v) else
  if reg_name = "fcsr" then OPTION_MAP (\ v .  fcsr_ref.write_to v s) (fcsr_ref.of_regval v) else
  if reg_name = "f31" then OPTION_MAP (\ v .  f31_ref.write_to v s) (f31_ref.of_regval v) else
  if reg_name = "f30" then OPTION_MAP (\ v .  f30_ref.write_to v s) (f30_ref.of_regval v) else
  if reg_name = "f29" then OPTION_MAP (\ v .  f29_ref.write_to v s) (f29_ref.of_regval v) else
  if reg_name = "f28" then OPTION_MAP (\ v .  f28_ref.write_to v s) (f28_ref.of_regval v) else
  if reg_name = "f27" then OPTION_MAP (\ v .  f27_ref.write_to v s) (f27_ref.of_regval v) else
  if reg_name = "f26" then OPTION_MAP (\ v .  f26_ref.write_to v s) (f26_ref.of_regval v) else
  if reg_name = "f25" then OPTION_MAP (\ v .  f25_ref.write_to v s) (f25_ref.of_regval v) else
  if reg_name = "f24" then OPTION_MAP (\ v .  f24_ref.write_to v s) (f24_ref.of_regval v) else
  if reg_name = "f23" then OPTION_MAP (\ v .  f23_ref.write_to v s) (f23_ref.of_regval v) else
  if reg_name = "f22" then OPTION_MAP (\ v .  f22_ref.write_to v s) (f22_ref.of_regval v) else
  if reg_name = "f21" then OPTION_MAP (\ v .  f21_ref.write_to v s) (f21_ref.of_regval v) else
  if reg_name = "f20" then OPTION_MAP (\ v .  f20_ref.write_to v s) (f20_ref.of_regval v) else
  if reg_name = "f19" then OPTION_MAP (\ v .  f19_ref.write_to v s) (f19_ref.of_regval v) else
  if reg_name = "f18" then OPTION_MAP (\ v .  f18_ref.write_to v s) (f18_ref.of_regval v) else
  if reg_name = "f17" then OPTION_MAP (\ v .  f17_ref.write_to v s) (f17_ref.of_regval v) else
  if reg_name = "f16" then OPTION_MAP (\ v .  f16_ref.write_to v s) (f16_ref.of_regval v) else
  if reg_name = "f15" then OPTION_MAP (\ v .  f15_ref.write_to v s) (f15_ref.of_regval v) else
  if reg_name = "f14" then OPTION_MAP (\ v .  f14_ref.write_to v s) (f14_ref.of_regval v) else
  if reg_name = "f13" then OPTION_MAP (\ v .  f13_ref.write_to v s) (f13_ref.of_regval v) else
  if reg_name = "f12" then OPTION_MAP (\ v .  f12_ref.write_to v s) (f12_ref.of_regval v) else
  if reg_name = "f11" then OPTION_MAP (\ v .  f11_ref.write_to v s) (f11_ref.of_regval v) else
  if reg_name = "f10" then OPTION_MAP (\ v .  f10_ref.write_to v s) (f10_ref.of_regval v) else
  if reg_name = "f9" then OPTION_MAP (\ v .  f9_ref.write_to v s) (f9_ref.of_regval v) else
  if reg_name = "f8" then OPTION_MAP (\ v .  f8_ref.write_to v s) (f8_ref.of_regval v) else
  if reg_name = "f7" then OPTION_MAP (\ v .  f7_ref.write_to v s) (f7_ref.of_regval v) else
  if reg_name = "f6" then OPTION_MAP (\ v .  f6_ref.write_to v s) (f6_ref.of_regval v) else
  if reg_name = "f5" then OPTION_MAP (\ v .  f5_ref.write_to v s) (f5_ref.of_regval v) else
  if reg_name = "f4" then OPTION_MAP (\ v .  f4_ref.write_to v s) (f4_ref.of_regval v) else
  if reg_name = "f3" then OPTION_MAP (\ v .  f3_ref.write_to v s) (f3_ref.of_regval v) else
  if reg_name = "f2" then OPTION_MAP (\ v .  f2_ref.write_to v s) (f2_ref.of_regval v) else
  if reg_name = "f1" then OPTION_MAP (\ v .  f1_ref.write_to v s) (f1_ref.of_regval v) else
  if reg_name = "f0" then OPTION_MAP (\ v .  f0_ref.write_to v s) (f0_ref.of_regval v) else
  if reg_name = "float_fflags" then OPTION_MAP (\ v .  float_fflags_ref.write_to v s) (float_fflags_ref.of_regval v) else
  if reg_name = "float_result" then OPTION_MAP (\ v .  float_result_ref.write_to v s) (float_result_ref.of_regval v) else
  if reg_name = "utval" then OPTION_MAP (\ v .  utval_ref.write_to v s) (utval_ref.of_regval v) else
  if reg_name = "ucause" then OPTION_MAP (\ v .  ucause_ref.write_to v s) (ucause_ref.of_regval v) else
  if reg_name = "uepc" then OPTION_MAP (\ v .  uepc_ref.write_to v s) (uepc_ref.of_regval v) else
  if reg_name = "uscratch" then OPTION_MAP (\ v .  uscratch_ref.write_to v s) (uscratch_ref.of_regval v) else
  if reg_name = "utvec" then OPTION_MAP (\ v .  utvec_ref.write_to v s) (utvec_ref.of_regval v) else
  if reg_name = "pmpaddr15" then OPTION_MAP (\ v .  pmpaddr15_ref.write_to v s) (pmpaddr15_ref.of_regval v) else
  if reg_name = "pmpaddr14" then OPTION_MAP (\ v .  pmpaddr14_ref.write_to v s) (pmpaddr14_ref.of_regval v) else
  if reg_name = "pmpaddr13" then OPTION_MAP (\ v .  pmpaddr13_ref.write_to v s) (pmpaddr13_ref.of_regval v) else
  if reg_name = "pmpaddr12" then OPTION_MAP (\ v .  pmpaddr12_ref.write_to v s) (pmpaddr12_ref.of_regval v) else
  if reg_name = "pmpaddr11" then OPTION_MAP (\ v .  pmpaddr11_ref.write_to v s) (pmpaddr11_ref.of_regval v) else
  if reg_name = "pmpaddr10" then OPTION_MAP (\ v .  pmpaddr10_ref.write_to v s) (pmpaddr10_ref.of_regval v) else
  if reg_name = "pmpaddr9" then OPTION_MAP (\ v .  pmpaddr9_ref.write_to v s) (pmpaddr9_ref.of_regval v) else
  if reg_name = "pmpaddr8" then OPTION_MAP (\ v .  pmpaddr8_ref.write_to v s) (pmpaddr8_ref.of_regval v) else
  if reg_name = "pmpaddr7" then OPTION_MAP (\ v .  pmpaddr7_ref.write_to v s) (pmpaddr7_ref.of_regval v) else
  if reg_name = "pmpaddr6" then OPTION_MAP (\ v .  pmpaddr6_ref.write_to v s) (pmpaddr6_ref.of_regval v) else
  if reg_name = "pmpaddr5" then OPTION_MAP (\ v .  pmpaddr5_ref.write_to v s) (pmpaddr5_ref.of_regval v) else
  if reg_name = "pmpaddr4" then OPTION_MAP (\ v .  pmpaddr4_ref.write_to v s) (pmpaddr4_ref.of_regval v) else
  if reg_name = "pmpaddr3" then OPTION_MAP (\ v .  pmpaddr3_ref.write_to v s) (pmpaddr3_ref.of_regval v) else
  if reg_name = "pmpaddr2" then OPTION_MAP (\ v .  pmpaddr2_ref.write_to v s) (pmpaddr2_ref.of_regval v) else
  if reg_name = "pmpaddr1" then OPTION_MAP (\ v .  pmpaddr1_ref.write_to v s) (pmpaddr1_ref.of_regval v) else
  if reg_name = "pmpaddr0" then OPTION_MAP (\ v .  pmpaddr0_ref.write_to v s) (pmpaddr0_ref.of_regval v) else
  if reg_name = "pmp15cfg" then OPTION_MAP (\ v .  pmp15cfg_ref.write_to v s) (pmp15cfg_ref.of_regval v) else
  if reg_name = "pmp14cfg" then OPTION_MAP (\ v .  pmp14cfg_ref.write_to v s) (pmp14cfg_ref.of_regval v) else
  if reg_name = "pmp13cfg" then OPTION_MAP (\ v .  pmp13cfg_ref.write_to v s) (pmp13cfg_ref.of_regval v) else
  if reg_name = "pmp12cfg" then OPTION_MAP (\ v .  pmp12cfg_ref.write_to v s) (pmp12cfg_ref.of_regval v) else
  if reg_name = "pmp11cfg" then OPTION_MAP (\ v .  pmp11cfg_ref.write_to v s) (pmp11cfg_ref.of_regval v) else
  if reg_name = "pmp10cfg" then OPTION_MAP (\ v .  pmp10cfg_ref.write_to v s) (pmp10cfg_ref.of_regval v) else
  if reg_name = "pmp9cfg" then OPTION_MAP (\ v .  pmp9cfg_ref.write_to v s) (pmp9cfg_ref.of_regval v) else
  if reg_name = "pmp8cfg" then OPTION_MAP (\ v .  pmp8cfg_ref.write_to v s) (pmp8cfg_ref.of_regval v) else
  if reg_name = "pmp7cfg" then OPTION_MAP (\ v .  pmp7cfg_ref.write_to v s) (pmp7cfg_ref.of_regval v) else
  if reg_name = "pmp6cfg" then OPTION_MAP (\ v .  pmp6cfg_ref.write_to v s) (pmp6cfg_ref.of_regval v) else
  if reg_name = "pmp5cfg" then OPTION_MAP (\ v .  pmp5cfg_ref.write_to v s) (pmp5cfg_ref.of_regval v) else
  if reg_name = "pmp4cfg" then OPTION_MAP (\ v .  pmp4cfg_ref.write_to v s) (pmp4cfg_ref.of_regval v) else
  if reg_name = "pmp3cfg" then OPTION_MAP (\ v .  pmp3cfg_ref.write_to v s) (pmp3cfg_ref.of_regval v) else
  if reg_name = "pmp2cfg" then OPTION_MAP (\ v .  pmp2cfg_ref.write_to v s) (pmp2cfg_ref.of_regval v) else
  if reg_name = "pmp1cfg" then OPTION_MAP (\ v .  pmp1cfg_ref.write_to v s) (pmp1cfg_ref.of_regval v) else
  if reg_name = "pmp0cfg" then OPTION_MAP (\ v .  pmp0cfg_ref.write_to v s) (pmp0cfg_ref.of_regval v) else
  if reg_name = "tselect" then OPTION_MAP (\ v .  tselect_ref.write_to v s) (tselect_ref.of_regval v) else
  if reg_name = "stval" then OPTION_MAP (\ v .  stval_ref.write_to v s) (stval_ref.of_regval v) else
  if reg_name = "scause" then OPTION_MAP (\ v .  scause_ref.write_to v s) (scause_ref.of_regval v) else
  if reg_name = "sepc" then OPTION_MAP (\ v .  sepc_ref.write_to v s) (sepc_ref.of_regval v) else
  if reg_name = "sscratch" then OPTION_MAP (\ v .  sscratch_ref.write_to v s) (sscratch_ref.of_regval v) else
  if reg_name = "stvec" then OPTION_MAP (\ v .  stvec_ref.write_to v s) (stvec_ref.of_regval v) else
  if reg_name = "sideleg" then OPTION_MAP (\ v .  sideleg_ref.write_to v s) (sideleg_ref.of_regval v) else
  if reg_name = "sedeleg" then OPTION_MAP (\ v .  sedeleg_ref.write_to v s) (sedeleg_ref.of_regval v) else
  if reg_name = "mhartid" then OPTION_MAP (\ v .  mhartid_ref.write_to v s) (mhartid_ref.of_regval v) else
  if reg_name = "marchid" then OPTION_MAP (\ v .  marchid_ref.write_to v s) (marchid_ref.of_regval v) else
  if reg_name = "mimpid" then OPTION_MAP (\ v .  mimpid_ref.write_to v s) (mimpid_ref.of_regval v) else
  if reg_name = "mvendorid" then OPTION_MAP (\ v .  mvendorid_ref.write_to v s) (mvendorid_ref.of_regval v) else
  if reg_name = "minstret_written" then OPTION_MAP (\ v .  minstret_written_ref.write_to v s) (minstret_written_ref.of_regval v) else
  if reg_name = "minstret" then OPTION_MAP (\ v .  minstret_ref.write_to v s) (minstret_ref.of_regval v) else
  if reg_name = "mtime" then OPTION_MAP (\ v .  mtime_ref.write_to v s) (mtime_ref.of_regval v) else
  if reg_name = "mcycle" then OPTION_MAP (\ v .  mcycle_ref.write_to v s) (mcycle_ref.of_regval v) else
  if reg_name = "mcountinhibit" then OPTION_MAP (\ v .  mcountinhibit_ref.write_to v s) (mcountinhibit_ref.of_regval v) else
  if reg_name = "scounteren" then OPTION_MAP (\ v .  scounteren_ref.write_to v s) (scounteren_ref.of_regval v) else
  if reg_name = "mcounteren" then OPTION_MAP (\ v .  mcounteren_ref.write_to v s) (mcounteren_ref.of_regval v) else
  if reg_name = "mscratch" then OPTION_MAP (\ v .  mscratch_ref.write_to v s) (mscratch_ref.of_regval v) else
  if reg_name = "mtval" then OPTION_MAP (\ v .  mtval_ref.write_to v s) (mtval_ref.of_regval v) else
  if reg_name = "mepc" then OPTION_MAP (\ v .  mepc_ref.write_to v s) (mepc_ref.of_regval v) else
  if reg_name = "mcause" then OPTION_MAP (\ v .  mcause_ref.write_to v s) (mcause_ref.of_regval v) else
  if reg_name = "mtvec" then OPTION_MAP (\ v .  mtvec_ref.write_to v s) (mtvec_ref.of_regval v) else
  if reg_name = "medeleg" then OPTION_MAP (\ v .  medeleg_ref.write_to v s) (medeleg_ref.of_regval v) else
  if reg_name = "mideleg" then OPTION_MAP (\ v .  mideleg_ref.write_to v s) (mideleg_ref.of_regval v) else
  if reg_name = "mie" then OPTION_MAP (\ v .  mie_ref.write_to v s) (mie_ref.of_regval v) else
  if reg_name = "mip" then OPTION_MAP (\ v .  mip_ref.write_to v s) (mip_ref.of_regval v) else
  if reg_name = "mstatus" then OPTION_MAP (\ v .  mstatus_ref.write_to v s) (mstatus_ref.of_regval v) else
  if reg_name = "mstatush" then OPTION_MAP (\ v .  mstatush_ref.write_to v s) (mstatush_ref.of_regval v) else
  if reg_name = "misa" then OPTION_MAP (\ v .  misa_ref.write_to v s) (misa_ref.of_regval v) else
  if reg_name = "cur_inst" then OPTION_MAP (\ v .  cur_inst_ref.write_to v s) (cur_inst_ref.of_regval v) else
  if reg_name = "cur_privilege" then OPTION_MAP (\ v .  cur_privilege_ref.write_to v s) (cur_privilege_ref.of_regval v) else
  if reg_name = "x31" then OPTION_MAP (\ v .  x31_ref.write_to v s) (x31_ref.of_regval v) else
  if reg_name = "x30" then OPTION_MAP (\ v .  x30_ref.write_to v s) (x30_ref.of_regval v) else
  if reg_name = "x29" then OPTION_MAP (\ v .  x29_ref.write_to v s) (x29_ref.of_regval v) else
  if reg_name = "x28" then OPTION_MAP (\ v .  x28_ref.write_to v s) (x28_ref.of_regval v) else
  if reg_name = "x27" then OPTION_MAP (\ v .  x27_ref.write_to v s) (x27_ref.of_regval v) else
  if reg_name = "x26" then OPTION_MAP (\ v .  x26_ref.write_to v s) (x26_ref.of_regval v) else
  if reg_name = "x25" then OPTION_MAP (\ v .  x25_ref.write_to v s) (x25_ref.of_regval v) else
  if reg_name = "x24" then OPTION_MAP (\ v .  x24_ref.write_to v s) (x24_ref.of_regval v) else
  if reg_name = "x23" then OPTION_MAP (\ v .  x23_ref.write_to v s) (x23_ref.of_regval v) else
  if reg_name = "x22" then OPTION_MAP (\ v .  x22_ref.write_to v s) (x22_ref.of_regval v) else
  if reg_name = "x21" then OPTION_MAP (\ v .  x21_ref.write_to v s) (x21_ref.of_regval v) else
  if reg_name = "x20" then OPTION_MAP (\ v .  x20_ref.write_to v s) (x20_ref.of_regval v) else
  if reg_name = "x19" then OPTION_MAP (\ v .  x19_ref.write_to v s) (x19_ref.of_regval v) else
  if reg_name = "x18" then OPTION_MAP (\ v .  x18_ref.write_to v s) (x18_ref.of_regval v) else
  if reg_name = "x17" then OPTION_MAP (\ v .  x17_ref.write_to v s) (x17_ref.of_regval v) else
  if reg_name = "x16" then OPTION_MAP (\ v .  x16_ref.write_to v s) (x16_ref.of_regval v) else
  if reg_name = "x15" then OPTION_MAP (\ v .  x15_ref.write_to v s) (x15_ref.of_regval v) else
  if reg_name = "x14" then OPTION_MAP (\ v .  x14_ref.write_to v s) (x14_ref.of_regval v) else
  if reg_name = "x13" then OPTION_MAP (\ v .  x13_ref.write_to v s) (x13_ref.of_regval v) else
  if reg_name = "x12" then OPTION_MAP (\ v .  x12_ref.write_to v s) (x12_ref.of_regval v) else
  if reg_name = "x11" then OPTION_MAP (\ v .  x11_ref.write_to v s) (x11_ref.of_regval v) else
  if reg_name = "x10" then OPTION_MAP (\ v .  x10_ref.write_to v s) (x10_ref.of_regval v) else
  if reg_name = "x9" then OPTION_MAP (\ v .  x9_ref.write_to v s) (x9_ref.of_regval v) else
  if reg_name = "x8" then OPTION_MAP (\ v .  x8_ref.write_to v s) (x8_ref.of_regval v) else
  if reg_name = "x7" then OPTION_MAP (\ v .  x7_ref.write_to v s) (x7_ref.of_regval v) else
  if reg_name = "x6" then OPTION_MAP (\ v .  x6_ref.write_to v s) (x6_ref.of_regval v) else
  if reg_name = "x5" then OPTION_MAP (\ v .  x5_ref.write_to v s) (x5_ref.of_regval v) else
  if reg_name = "x4" then OPTION_MAP (\ v .  x4_ref.write_to v s) (x4_ref.of_regval v) else
  if reg_name = "x3" then OPTION_MAP (\ v .  x3_ref.write_to v s) (x3_ref.of_regval v) else
  if reg_name = "x2" then OPTION_MAP (\ v .  x2_ref.write_to v s) (x2_ref.of_regval v) else
  if reg_name = "x1" then OPTION_MAP (\ v .  x1_ref.write_to v s) (x1_ref.of_regval v) else
  if reg_name = "instbits" then OPTION_MAP (\ v .  instbits_ref.write_to v s) (instbits_ref.of_regval v) else
  if reg_name = "nextPC" then OPTION_MAP (\ v .  nextPC_ref.write_to v s) (nextPC_ref.of_regval v) else
  if reg_name = "PC" then OPTION_MAP (\ v .  PC_ref.write_to v s) (PC_ref.of_regval v) else
  NONE))`;


val _ = Define `
 ((register_accessors:(string -> regstate ->(register_value)option)#(string -> register_value -> regstate ->(regstate)option))=  (get_regval, set_regval))`;



val _ = type_abbrev((* ( 'a, 'r) *) "MR" , ``:  (regstate, 'a, 'r, exception)monadR``);
val _ = type_abbrev((*  'a *) "M" , ``:  (regstate, 'a, exception)monad``);
val _ = export_theory()

